!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(require("react"),require("react-dom"),require("react-redux"),require("foundation"),require("redux-thunk"),require("redux"),require("reselect"),require("prop-types"),require("classnames")):"function"==typeof define&&define.amd?define(["react","react-dom","react-redux","foundation","redux-thunk","redux","reselect","prop-types","classnames"],t):t((e=e||self).React,e.ReactDOM,e.ReactRedux,e.Foundation,e.ReduxThunk,e.Redux,e.Reselect,e.PropTypes,e.classNames)}(this,function(o,a,e,s,n,r,t,c,f){"use strict";var m="default"in o?o.default:o;function u(e){return function(e){if(Array.isArray(e))return l(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return l(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return l(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function l(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}a=a&&Object.prototype.hasOwnProperty.call(a,"default")?a.default:a,n=n&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n,c=c&&Object.prototype.hasOwnProperty.call(c,"default")?c.default:c,f=f&&Object.prototype.hasOwnProperty.call(f,"default")?f.default:f;function i(t){return new Promise(function(e){setTimeout(e,t)})}var d=s.userType.hasXwd?0:4;function p(e){return(p="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function y(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,r)}return n}function b(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function h(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function g(r){return function(){var e,t=E(r);if(function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}()){var n=E(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return function(e,t){return!t||"object"!==p(t)&&"function"!=typeof t?v(e):t}(this,e)}}function v(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function E(e){return(E=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function w(e,t){return(w=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function S(e){return(S="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function N(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function O(r){return function(){var e,t=k(r);if(function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}()){var n=k(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return function(e,t){return!t||"object"!==S(t)&&"function"!=typeof t?function(e){if(void 0!==e)return e;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(e):t}(this,e)}}function k(e){return(k=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function _(e,t){return(_=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var j=function(){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&_(e,t)}(r,m.Component);var n=O(r);function r(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,r),(t=n.call(this,e)).state={href:"mailto:nytgames@nytimes.com"},t}return function(e,t,n){t&&N(e.prototype,t),n&&N(e,n)}(r,[{key:"componentDidMount",value:function(){var t=this,e=this.props.subject;s.getFeedbackLink(e).then(function(e){return t.setState({href:e})})}},{key:"render",value:function(){var e=this.props,t=e.href,n=e.subject,r=e.children,o=this.state.href,a=t&&n?n:"",c=t?"".concat(t,"?subject=").concat(a):o;return m.createElement("a",{rel:"noopener noreferrer",target:"_blank",href:c},r)}}]),r}();j.defaultProps={subject:"",href:"",children:null};function L(){window.localStorage.removeItem(A)}function P(e){return s.xhr.get("".concat(s.env.api,"/svc/spelling-bee/v1/game/").concat(e,".json")).then(function(e){return e.answers}).catch(function(e){console.error("unable to get remote progress",e)})}function T(e,t){return t.length?s.xhr.put("".concat(s.env.api,"/svc/spelling-bee/v1/game.json"),{puzzleID:e,answers:t}):Promise.resolve()}function x(t,n,r){function o(){if(window.SIMULATE_OFFLINE)return Promise.reject(new Error("simulating offline"));var e=t.getState().foundWords;!function(e,t){if(t.length)try{window.localStorage.setItem(A,JSON.stringify({id:e,words:t}))}catch(e){console.error("local storage failure:",e)}}(a,e),T(a,e).catch(function(e){console.error("unable to save remote progress",e)})}var e=t.getState(),a=e.id,c=e.yesterday.id,l=function(e){var t,n=window.localStorage.getItem(A);if(n)try{var r=JSON.parse(n);t=r.words,e!==r.id&&(t=L())}catch(e){t=L(),console.error("could not parse local progress: ".concat(n))}return t}(a),i=0;P(c).then(function(e){r(e)}),l&&(i=l.length,n(l)),P(a).then(function(e){e&&n(e),o()}),t.subscribe(function(){var e=t.getState().foundWords;i!==e.length&&(i=e.length,0===e.length?(function(e){delete window.resetProgressComplete,s.xhr.delete("".concat(s.env.api,"/svc/spelling-bee/v1/game/").concat(e,".json")).then(function(){window.resetProgressComplete=!0}).catch(function(e){console.error(e)})}(a),L()):o())}),window.addEventListener("online",o)}var R,W,C,D,M=function(){return m.createElement(m.Fragment,null,m.createElement("h3",{className:"sb-modal-title"},"Big Hint"),m.createElement("h4",{className:"sb-modal-heading"},"A room in a house."),m.createElement("ul",{className:"sb-modal-list"}/*,m.createElement("li",null,"Hello!")*/))},z=e.connect(function(e){return{ranks:tt(e)}})(function(e){var t=e.ranks;return m.createElement(m.Fragment,null,m.createElement("h3",{className:"sb-modal-title"},"Rankings"),m.createElement("p",{className:"sb-modal-message"},"Ranks are based on a percentage of possible points in a puzzle. The minimum scores to reach each rank for today’s are:"),m.createElement("ol",{className:"sb-modal-list"},t.map(function(e){var t=e.minScore,n=e.title;return m.createElement("li",{key:n},"".concat(n," (").concat(t,")"))})),m.createElement("p",{className:"sb-modal-message"},"Have feedback? Email us at ",m.createElement(j,{subject:"Spelling Bee Feedback"},"nytgames@nytimes.com"),"."))}),A="sb-today",I=["modal","gameplay","settings","general"],U=["tech","gameplay","settings"],K=(R="SB",W=s.getGameData().today.id,C="".concat(R,"-").concat(W),D={interaction:{},impression:{}},I.forEach(function(n){D.interaction[n]=function(e,t){return F("moduleInteraction",n,e,t)}}),U.forEach(function(n){D.impression[n]=function(e,t){return F("impression",n,e,t)}}),D);function F(e,t,n,r){s.track(e,"moduleInteraction"===e?{module:{name:t,context:C,element:{name:n||"",label:"string"==typeof r?r:JSON.stringify(r)}},eventData:{pageType:"game",type:"click",trigger:"module",status:""}}:{module:{name:t,context:C,region:n||"",label:"string"==typeof r?r:JSON.stringify(r)}})}function B(e){var t=e.children,n=void 0===t?"Ok, on my way":t,r=e.triggerName,o=e.disabled;return m.createElement("a",{className:f("sb-modal-button",{disabled:o}),href:"",onClick:function(e){if(o)return e.preventDefault();K.interaction.gameplay("back-to-hub",r)}},n)}function Y(e){return(Y="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function G(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function H(r){return function(){var e,t=X(r);if(function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}()){var n=X(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return function(e,t){return!t||"object"!==Y(t)&&"function"!=typeof t?function(e){if(void 0!==e)return e;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(e):t}(this,e)}}function X(e){return(X=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function q(e,t){return(q=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var J=function(){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&q(e,t)}(r,m.Component);var n=H(r);function r(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,r),(t=n.call(this,e)).state={buttonText:"Back to the hub",message:"Your progress auto-saves, so feel free to leave and come back later today.",pending:!0},t}return function(e,t,n){t&&G(e.prototype,t),n&&G(e,n)}(r,[{key:"componentDidMount",value:function(){var e=this,t=this.props,n=t.foundWords,r=t.id;T(r,n).then(function(){e.setState({pending:!1})}).catch(function(){e.setState({buttonText:"Something went wrong",message:"Your progress is stored on this device but may not be synced to other devices."})})}},{key:"render",value:function(){var e=this.state,t=e.message,n=e.pending,r=e.buttonText;return m.createElement(m.Fragment,null,m.createElement("div",{className:"sb-modal-image bee-sleepy"}),m.createElement("h3",{className:"sb-modal-title"},"See you later"),m.createElement("p",{className:"sb-modal-message"},t),m.createElement("div",{className:"sb-modal-buttons-section"},m.createElement(B,{disabled:n,triggerName:"see-you-later"},r)))}}]),r}();J.defaultProps={foundWords:[],id:null};function Q(e){var t=e.editor;return m.createElement(m.Fragment,null,m.createElement("div",{className:"sb-modal-image bee-ready"}),m.createElement("h3",{className:"pz-modal__title"},"Spelling Bee"),m.createElement("p",{className:"pz-modal__message"},"How many words can you make with 7 letters?"),m.createElement("div",{className:"pz-byline"},m.createElement("span",{className:"pz-byline__text"},"Edited by"," ",t)))}function $(e){var t=e.wordCount,n=e.score;return m.createElement(m.Fragment,null,m.createElement("h3",{className:"pz-modal__title"},"Welcome Back"),m.createElement("p",{className:"pz-modal-message"},"You’ve found",m.createElement("em",null," ".concat(t," word").concat(1<t?"s":"")),m.createElement("br",null),"and have",m.createElement("em",null," ".concat(n," point").concat(1<n?"s":"")),"."))}function V(e){var t=e.toggleModal;return m.createElement("button",{type:"button",className:"pz-modal__button white",onClick:function(){return t("yesterday","get-started")}},"Yesterday")}function Z(e){var t=e.toggleModal,n=e.isReturning;return m.createElement("button",{type:"button",className:"pz-modal__button dark",onClick:function(){t(null,"get-started")}},n?"Continue":"Play")}function ee(e){var t=e.tag,n=void 0===t?"cutoff-start":t,r=e.styleName,o=void 0===r?"white":r;return m.createElement("button",{type:"button",className:"pz-modal__button ".concat(o),onClick:function(){return window.location.href=function(e,t,n){var r=!(2<arguments.length&&void 0!==n)||n;if(!(e&&ne[e]&&t&&ne[e][t]))return re;var o=ne[e][t],a="string"==typeof o?o:o[r?"mobile":"desktop"];return"".concat(re,"?campaignId=").concat(a)}("spelling-bee",n),null}},"Subscribe")}var te=e.connect(function(e){return{foundWords:e.foundWords,id:e.id}})(J),ne={"spelling-bee":{"cutoff-start":"7F9J7","cutoff-stop":"79XQU","cutoff-welcome-back":"7KK8Q","credits-start":"7H7QU","credits-no-plays":"7X8YL",genius:"79JY7","queen-bee":"7UWXR"},vertex:{"vertex-congrats-moment-mid-starter-pack":"989YK","vertex-congrats-moment-end-of-starter-pack":"9K9UL","vertex-welcome-moment-daily-puzzle":"9RXHL","vertex-welcome-moment-subwall":"9WYLF","vertex-preview-page-nonsubs":"9J9RU","vertex-todays-puzzle":"9KK7K",default:"9HURJ"},tiles:{welcome:{desktop:"7U798",mobile:"7Y97X"},congrats:{desktop:"7Y8WW",mobile:"7RYYF"},default:{desktop:"7X97X",mobile:"7X7JU"},settings:{desktop:"7XH8W",mobile:"7JR89"}}},re="https://www.nytimes.com/subscription/games",oe=e.connect(function(e){var t=e.foundWords,n=e.editor;return{wordCount:t.length,score:et(e),editor:n}})(function(e){var t=e.score,n=e.wordCount,r=e.toggleModal,o=e.editor,a=0<n,c=a?"returning":"new";return m.createElement("div",{className:"welcome-modal ".concat(c)},a?m.createElement($,{wordCount:n,score:t}):m.createElement(Q,{editor:o}),m.createElement("div",{className:"sb-modal-buttons-section"},m.createElement(Z,{toggleModal:r,isReturning:a}),m.createElement("div",{className:"pz-button__wrapper"},m.createElement("button",{type:"button",className:"pz-modal__button white",onClick:function(){return r("help","get-started")}},"Rules"),m.createElement(V,{toggleModal:r}))))});function ae(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,o=!1,a=void 0;try{for(var c,l=e[Symbol.iterator]();!(r=(c=l.next()).done)&&(n.push(c.value),!t||n.length!==t);r=!0);}catch(e){o=!0,a=e}finally{try{r||null==l.return||l.return()}finally{if(o)throw a}}return n}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return ce(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return ce(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ce(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function le(e){var t=e.bannerHeading,n=e.bannerText;return"anon"===s.userType.entitlement?m.createElement("div",{className:"login-banner slide-down"},t&&m.createElement("p",{className:"login-banner__text"},t),m.createElement("p",{className:"login-banner__text"},n," ",m.createElement("a",{className:"login-banner__action",href:he},"Log in."))):null}function ie(e){var t=e.value,n=e.centerLetter,r=[],o=t.split(n),a=0;return o.forEach(function(e,t){a+=1,0<t&&r.push(m.createElement("span",{key:a,className:"sb-anagram-key"},n)),e&&r.push(e)}),m.createElement("span",{className:"sb-anagram"},r)}function se(e,t){return Se.toggleModal(e,t)}var ue,fe,me,de,pe,ye,be=(ue={redirect_uri:encodeURIComponent("https://www.nytimes.com"+window.location.pathname),response_type:"cookie",client_id:"games",application:"crosswords"},Object.entries(ue).reduce(function(e,t,n){var r=ae(t,2),o=r[0],a=r[1],c=Object.keys(ue).length-1===n?"":"&";return"".concat(e).concat(o,"=").concat(a).concat(c)},"")),he="https://myaccount.nytimes.com/auth/login?".concat(be),ge=e.connect(function(e){var t=e.foundWords,n=e.editor;return{wordCount:t.length,score:et(e),editor:n,cutoff:ct(e)}})(function(e){var t=e.lock,n=e.score,r=e.wordCount,o=e.toggleModal,a=e.editor,c=0<r,l=c?"returning":"new",i={bannerHeading:"Welcome! 👋",bannerText:"Already have an account?"};return e.cutoff?(t(),m.createElement("div",{className:"welcome-modal returning"},m.createElement("h3",{className:"pz-modal__title"},"Welcome Back"),m.createElement("p",{className:"pz-modal-message"},"Subscribe to continue playing Spelling Bee or come back tomorrow."),m.createElement("div",{className:"sb-modal-buttons-section"},m.createElement(ee,{tag:"cutoff-stop",styleName:"dark"})))):m.createElement("div",{className:"welcome-modal ".concat(l)},c?m.createElement($,{wordCount:r,score:n}):m.createElement(Q,{editor:a}),m.createElement("div",{className:"sb-modal-buttons-section"},m.createElement(Z,{toggleModal:o,isReturning:c}),m.createElement("div",{className:"pz-button__wrapper"},m.createElement("button",{type:"button",className:"pz-modal__button white",onClick:function(){return o("help","get-started")}},"Rules"),s.userType.hasXwd?m.createElement(V,{toggleModal:o}):m.createElement(ee,{tag:c?"cutoff-welcome-back":"cutoff-start",styleName:"dark"}))),m.createElement(le,i))}),ve=e.connect(function(e){return{hasCompleted:at(e),wordCount:e.foundWords.length,score:et(e),isHalloween:/10-31/.test(e.printDate)}})(function(e){var t=e.hasCompleted,n=e.toggleModal,r=e.score,o=e.wordCount,a=e.isHalloween;return t?m.createElement(m.Fragment,null,m.createElement("div",{className:"sb-modal-image bee-queen"}),m.createElement("h3",{className:"sb-modal-title"},"Happy Birthday!"),m.createElement("p",{className:"sb-modal-message"},(window.gameData.today.pangrams[0]=="kitchen"?"Now come to the kitchen.":"Time for a nightcap.")),m.createElement("div",{className:"sb-modal-buttons-section"},m.createElement(B,{triggerName:"completed-modal"}))):m.createElement(m.Fragment,null,m.createElement("div",{className:f("sb-modal-image",a?"bee-spooky":"bee-smarty")}),m.createElement("h3",{className:"sb-modal-title"},"Genius"),m.createElement("p",{className:"sb-modal-message"},"You reached the highest rank, with"," ",m.createElement("em",null,"".concat(o," words"))," ","and"," ",m.createElement("em",null,"".concat(r," points")),"."),m.createElement("div",{className:"sb-modal-buttons-section"},m.createElement("button",{type:"button",className:"sb-modal-button sb-modal-button-secondary",onClick:function(){return n()}},"Keep playing"),m.createElement(B,{triggerName:"genius-modal"})))}),Ee=e.connect(function(e){var t=e.yesterday;return{displayDate:t.displayDate,centerLetter:t.centerLetter,validLetters:t.validLetters,answers:t.answers,foundWords:t.foundWords}})(function(e){var t=e.displayDate,n=e.centerLetter,r=e.validLetters,o=e.answers,a=e.foundWords;return m.createElement(m.Fragment,null,m.createElement("h3",{className:"sb-modal-title"},"Yesterday’s Answers"),m.createElement("div",{className:"sb-modal-date__yesterday"},t),m.createElement("div",{className:"sb-modal-letters"},r),m.createElement("div",{className:"sb-modal-wordlist"},m.createElement("ul",{className:"sb-modal-wordlist-items"},o.map(function(e){return m.createElement("li",{key:e,"data-testid":"yesterdays-answer-word"},m.createElement(ie,{value:e,centerLetter:n}),a.includes(e)&&m.createElement("span",{className:"check"}))}))))}),we={start:0<d?ge:oe,help:M,ranks:z,save:te,congrats:ve,yesterday:Ee,cutoff:function(e){var t=e.lock,n={bannerText:"Already have an account?"};m.useEffect(function(){!function(e,t,n,r){var o=1<arguments.length&&void 0!==t?t:"",a=2<arguments.length&&void 0!==n?n:"",c=3<arguments.length&&void 0!==r?r:"";s.track("impression",{module:{name:e,region:o,label:a,context:c}})}("hardpaywall","spelling-bee-cutoff")},[]),m.useEffect(function(){t()},[]);function r(){return m.createElement("button",{type:"button",className:"pz-modal__button white",onClick:function(){return window.location.href="http://nytimes.com/puzzles",null}},"Quit")}return m.createElement("div",{className:"welcome-modal new"},m.createElement("div",{className:"sb-modal-image bee-loved"}),m.createElement("h3",{className:"pz-modal__title"},"You’re pretty good at this!"),m.createElement("p",{className:"pz-modal-message"},"Know more words? Subscribe to rank up even more."),m.createElement("div",{className:"sb-modal-buttons-section"},m.createElement("div",{className:"pz-button__wrapper"},m.createElement(r,null),m.createElement(ee,{tag:"cutoff-stop",styleName:"dark"}))),m.createElement(le,n))}},Se=(fe=we,me=function(e){var t=e.children,n=e.toggleModal,r=e.modalType,o=[M,z,Ee].includes(we[r]),a=m.createElement("div",{role:"button",className:"sb-modal-close",onClick:function(){return n()}},"×");return m.createElement("div",{role:"button",className:f("sb-modal-frame",{"left-aligned":o},r),onClick:function(e){return e.stopPropagation()}},o&&a,m.createElement("div",{className:"sb-modal-content"},t))},de=document.getElementById("portal-game-modals"),pe={},ye=function(){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&w(e,t)}(r,o.Component);var n=g(r);function r(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,r),(t=n.call(this,e)).state={currentModal:e.initialModal||null,isOpen:!!e.initialModal,isClosing:!1},pe.toggleModal=t.toggleModal.bind(v(t)),pe.lock=t.lock.bind(v(t)),pe.unlock=t.unlock.bind(v(t)),t.setThenWaitThenSet=t.setThenWaitThenSet.bind(v(t)),t}return function(e,t,n){t&&h(e.prototype,t),n&&h(e,n)}(r,[{key:"setThenWaitThenSet",value:function(e,t){var n=this;this.setState(function(){return function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?y(Object(n),!0).forEach(function(e){b(t,e,n[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):y(Object(n)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}({},e)},function(){return setTimeout(function(){n.setState(t)},150)})}},{key:"toggleModal",value:function(e,t){var n=this.state,r=n.isOpen,o=n.locked,a=n.currentModal,c=this.props,l=c.onOpen,i=c.onClose;if(!o){var s="string"==typeof e&&e;s?(l&&l(s,t),r?this.setState({currentModal:s}):this.setThenWaitThenSet({},{isOpen:!0,currentModal:s})):(i&&i(a,t),this.setThenWaitThenSet({isClosing:!0},{isClosing:!1,isOpen:!1,currentModal:null}))}}},{key:"lock",value:function(){this.setState({locked:!0})}},{key:"unlock",value:function(){this.setState({locked:!1})}},{key:"render",value:function(){var e=this.state,t=e.isOpen,n=e.isClosing,r=e.currentModal,o=fe[r]||null;return a.createPortal(m.createElement("div",{className:f("sb-modal-system",{"sb-modal-open":t,"sb-modal-closing":n})},m.createElement("div",{role:"presentation",className:"sb-modal-scrim",onClick:pe.toggleModal},m.createElement("div",{className:"sb-modal-wrapper"},r&&m.createElement(me,{key:r,toggleModal:pe.toggleModal,modalType:r},m.createElement(o,{toggleModal:pe.toggleModal,modalType:r,lock:pe.lock,unlock:pe.unlock}))))),de)}}]),r}(),pe.Modals=ye,pe.ModalButton=function(e){var t=e.modal,n=e.children,r=e.className,o=e.triggerName;return m.createElement("span",{role:"presentation",className:r,onClick:function(){pe.toggleModal(t,o)}},n)},pe),Ne=Se.Modals,Oe=Se.ModalButton;function ke(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,o=!1,a=void 0;try{for(var c,l=e[Symbol.iterator]();!(r=(c=l.next()).done)&&(n.push(c.value),!t||n.length!==t);r=!0);}catch(e){o=!0,a=e}finally{try{r||null==l.return||l.return()}finally{if(o)throw a}}return n}(e,t)||je(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _e(e){return function(e){if(Array.isArray(e))return Le(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||je(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function je(e,t){if(e){if("string"==typeof e)return Le(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(n):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Le(e,t):void 0}}function Le(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Pe(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,r)}return n}function Te(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?Pe(Object(n),!0).forEach(function(e){xe(t,e,n[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Pe(Object(n)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}function xe(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Re(e,t){return e.length<5?1:e.length+(t?7:0)}function We(e,n){return e.reduce(function(e,t){return e+Re(t,n.includes(t))},0)}function Ce(t,e){var n=e.type,r=e.payload;switch(n){case Be:return Te({},t,{input:[].concat(_e(t.input),[r])});case Ye:return Te({},t,{input:t.input.slice(0,-1)});case Fe:return Te({},t,{outerLetters:function e(t,n){for(var r=u(t),o=r.length;o;){o-=1;var a=Math.floor(Math.random()*o),c=r[o];if(r[o]=r[a],r[a]=c,n&&(t[o]===r[o]||t[a]===r[a]))return e(t,!0)}return r}(t.outerLetters,!0)});case Ge:return Te({},t,{input:[]});case He:return Te({},t,{foundWords:[].concat(_e(t.foundWords),[r])});case Qe:return Te({},t,{expandedWordlist:!t.expandedWordlist});case"LOCK":return Te({},t,{isLocked:!0});case"UNLOCK":return Te({},t,{isLocked:!1});case Xe:return Te({},t,{message:r});case qe:return Te({},t,{message:null});case Je:return Te({},t,{input:[],message:null});case Ve:return Te({},t,{foundWords:[].concat(_e(t.foundWords),_e(r.filter(function(e){return t.answers.includes(e)&&!t.foundWords.includes(e)})))});case Ze:return Te({},t,{yesterday:Te({},t.yesterday,{foundWords:_e(r||[]),fetched:!0})});case $e:return Te({},t,{foundWords:[]});default:return t}}function De(e){return We(e.answers,e.pangrams)}function Me(o){return function(e,t){e({type:Xe,payload:o});var n=o.isError?1100:900,r=o.isError?Je:qe;return i(n).then(function(){t().message&&e({type:r})})}}function ze(){return function(e){e({type:Fe})}}function Ae(i){return function(e,t){var n=t();if(!n.isLocked){var r=i||n.input.join("");if(r.length){if(window.cheat&&r.split("").every(function(e){return e===n.centerLetter}))return window.cheat(r.length);window.reset&&function(e,t){var n=1<arguments.length&&void 0!==t?t:[];return u(0<arguments.length&&void 0!==e?e:[]).sort().join()===u(n).sort().join()}(r.split(""),n.outerLetters)&&window.reset();var o=function(e,t){var n=e.split("");return e.length<4?"Too short":n.some(function(e){return!t.validLetters.includes(e)})?"Bad letters":e.includes(t.centerLetter)?t.answers.includes(e)?t.foundWords.includes(e)?"Already found":void 0:"Not in word list":"Missing center letter"}(r,n);if(o)e(Me({value:o,isError:!0}));else{e({type:He,payload:r});var a=n.pangrams.includes(r),c=Re(r,a),l=function(e,t){return t?"Pangram!":7<=e?"Awesome!":1<e?"Nice!":"Good!"}(c,a);e({type:Ge}),e(Me({value:l,points:c,isPangram:a}))}}}}}function Ie(s){var u;return function(i){return function(e){var t=s.getState(),n=i(e);if(e.type===Qe&&(t.expandedWordlist?K.interaction.gameplay("close-word-list",(new Date).getTime()-u):u=(new Date).getTime()),e.type===He){var r=s.getState(),o=nt(t),a=nt(r);if(o<a)for(var c=o+1;c<=a;c+=1){var l=Ke[c][0];K.interaction.gameplay("level-up","".concat(c,"-").concat(l.replace(" ","-").toLowerCase()))}!at(t)&&at(r)&&K.interaction.gameplay("level-up","".concat(nt(r)+1,"-completed"))}return n}}}function Ue(l){return function(c){return function(e){var t=l.getState(),n=c(e);if(e.type===He){var r=l.getState(),o=!ot(t)&&ot(r),a=!at(t)&&at(r);ct(r)&&setTimeout(function(){se("cutoff","in-game")},450),(o||a)&&setTimeout(function(){se("congrats","in-game")},450)}return n}}}var Ke=[["Beginner",0],["Good Start",2],["Moving Up",5],["Good",8],["Solid",15],["Nice",25],["Great",40],["Amazing",50],["Genius",70]],Fe="SHUFFLE",Be="INPUT_LETTER",Ye="DELETE_LETTER",Ge="CLEAR_INPUT",He="ACCEPT_WORD",Xe="SHOW_MESSAGE",qe="CLEAR_MESSAGE",Je="CLEAR_MESSAGE_AND_INPUT",Qe="TOGGLE_WORDLIST",$e="RESET_GAME",Ve="INSERT_FOUND_WORDS",Ze="SET_YESTERDAYS_FOUND_WORDS",et=function(e){return We(e.foundWords,e.pangrams)},tt=t.createSelector(De,function(o){return Ke.map(function(e){var t=ke(e,2),n=t[0],r=t[1];return{title:n,minScore:Math.round(r/100*o)}})}),nt=t.createSelector([et,tt],function(e,t){var n;for(n=0;n<t.length&&!(e<t[n].minScore);n+=1);return n-1}),rt=t.createSelector(nt,function(e){return Ke[e][0]}),ot=t.createSelector([et,nt],function(e,t){return t===Ke.length-1}),at=t.createSelector([et,De],function(e,t){return e===t}),ct=t.createSelector([nt],function(e){return 0<d&&d<=e}),lt=window,it="touchstart",st="touchend",ut="mousedown",ft="mouseup",mt="mouseout",dt="addEventListener",pt="removeEventListener",yt="push-active",bt=!1;if("function"==typeof lt.addEventListener){var ht=!1,gt=Object.defineProperty({},"passive",{get:function(){return ht=!0}}),vt=function(){};lt.addEventListener("testPassiveEventSupport",vt,gt),lt.removeEventListener("testPassiveEventSupport",vt,gt),bt=ht}function Et(t,n,r,o){function e(e){bt||e.preventDefault(),i&&t.classList.add(yt),o&&!l&&(l=setTimeout(function(){c=setInterval(function(){n(e)},90)},350)),n(e)}function a(e){e.cancelable&&e.preventDefault(),i&&t.classList.remove(yt),c=c&&clearInterval(c),l=l&&clearTimeout(l),r&&r(e)}var c,l,i=!!t.classList;return t[dt](it,e,wt),t[dt](ut,e),t[dt](st,a),t[dt](ft,a),t[dt](mt,a),function(){c=c&&clearInterval(c),l=l&&clearTimeout(l),t[pt](it),t[pt](ut),t[pt](st),t[pt](ft),t[pt](mt)}}var wt={passive:!0};function St(e){return(St="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Nt(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Ot(r){return function(){var e,t=kt(r);if(function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}()){var n=kt(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return function(e,t){return!t||"object"!==St(t)&&"function"!=typeof t?function(e){if(void 0!==e)return e;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(e):t}(this,e)}}function kt(e){return(kt=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function _t(e,t){return(_t=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var jt=Math.pow(3,.5),Lt=2*jt,Pt=[[0,jt],[1,0],[3,0],[4,jt],[3,Lt],[1,Lt]].map(function(e){return e.map(function(e){return 30*e}).join()}).join(" "),Tt=function(){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&_t(e,t)}(t,o.Component);var e=Ot(t);function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),e.apply(this,arguments)}return function(e,t,n){t&&Nt(e.prototype,t),n&&Nt(e,n)}(t,[{key:"componentDidMount",value:function(){var e=this.props,t=e.onUp,n=e.onDown;this.unbind=Et(this._el,n,t,!0)}},{key:"componentWillUnmount",value:function(){this.unbind()}},{key:"render",value:function(){var t=this,e=this.props,n=e.activeKey,r=e.letter,o=e.type;return m.createElement("svg",{className:f("hive-cell",o),viewBox:"0 0 ".concat(120," ").concat(30*Lt)},m.createElement("polygon",{ref:function(e){t._el=e},className:f("cell-fill",{"push-active":r===n}),points:Pt,stroke:"white",strokeWidth:7.5}),m.createElement("text",{className:"cell-letter",x:"50%",y:"50%",dy:"10.75%"},r))}}]),t}();function xt(e){return(xt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Rt(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Wt(r){return function(){var e,t=Ct(r);if(function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}()){var n=Ct(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return function(e,t){return!t||"object"!==xt(t)&&"function"!=typeof t?function(e){if(void 0!==e)return e;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(e):t}(this,e)}}function Ct(e){return(Ct=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Dt(e,t){return(Dt=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}Tt.defaultProps={letter:"",activeKey:"",type:"center",onUp:function(){},onDown:function(){}};var Mt=function(){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Dt(e,t)}(t,o.Component);var e=Wt(t);function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),e.apply(this,arguments)}return function(e,t,n){t&&Rt(e.prototype,t),n&&Rt(e,n)}(t,[{key:"componentDidMount",value:function(){var e=this.props,t=e.onDown,n=e.onUp,r=e.allowBurst;this.unbind=Et(this.button,t,n,r)}},{key:"componentWillUnmount",value:function(){this.unbind()}},{key:"render",value:function(){var t=this,e=this.props,n=e.className,r=e.children;return m.createElement("div",{ref:function(e){t.button=e},className:f(n,"sb-touch-button")},r)}}]),t}();function zt(e){return(zt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function At(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function It(r){return function(){var e,t=Kt(r);if(function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}()){var n=Kt(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return function(e,t){return!t||"object"!==zt(t)&&"function"!=typeof t?Ut(e):t}(this,e)}}function Ut(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Kt(e){return(Kt=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Ft(e,t){return(Ft=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Bt(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}Mt.defaultProps={className:"",onDown:function(){},onUp:function(){},allowBurst:!1,children:null};var Yt=/[a-z]/,Gt=function(){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Ft(e,t)}(n,o.Component);var t=It(n);function n(e){var l;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),Bt(Ut(l=t.call(this,e)),"handleKeydown",function(e){var t,n=l.props,r=n.inputLetter,o=n.deleteLetter,a=n.submitWord;if(!e.metaKey){if(8===e.keyCode||46===e.keyCode)t="delete",o(),e.preventDefault();else if(13===e.which)t="submit",a(),e.preventDefault();else if(32===e.keyCode)t="shuffle",l.handleShuffle(),e.preventDefault();else{var c=String.fromCharCode(e.which).toLowerCase();!function(e){return Yt.exec(e)}(c)||r(t=c)}l.setState({activeKey:t})}}),Bt(Ut(l),"handleKeyup",function(){l.setState({activeKey:null})}),Bt(Ut(l),"handleShuffle",function(){var e=l.props.shuffleLetters;if(!l.state.shuffleStage){l.setState({shuffleStage:"beforeShuffle"}),i(300).then(function(){l.setState({shuffleStage:"shuffling"}),e()}).then(function(){return i(10)}).then(function(){return l.setState({shuffleStage:"afterShuffle"})}).then(function(){return i(300)}).then(function(){return l.setState({shuffleStage:null})})}}),l.state={activeKey:null,shuffleStage:null},l}return function(e,t,n){t&&At(e.prototype,t),n&&At(e,n)}(n,[{key:"componentDidMount",value:function(){window.addEventListener("keydown",this.handleKeydown,!1),window.addEventListener("keyup",this.handleKeyup,!1)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("keydown",this.handleKeydown),window.removeEventListener("keyup",this.handleKeyup)}},{key:"render",value:function(){var e=this,t=this.props,n=t.outerLetters,r=t.centerLetter,o=t.inputLetter,a=t.deleteLetter,c=t.submitWord,l=this.state,i=l.activeKey,s=l.shuffleStage,u=[m.createElement(Tt,{key:r,letter:r,activeKey:i,onDown:function(){return o(r)},type:"center"})].concat([n.map(function(e){return m.createElement(Tt,{key:e,letter:e,activeKey:i,onDown:function(){return o(e)},className:i===e?"cell-down":"",type:"outer"})})]);return m.createElement(m.Fragment,null,m.createElement("div",{className:"sb-hive"},m.createElement("div",{className:f("hive",{"fade-out":"beforeShuffle"===s},{shuffling:"shuffling"===s},{"fade-in":"afterShuffle"===s})},u)),m.createElement("div",{className:"hive-actions"},m.createElement(Mt,{allowBurst:!0,className:f("hive-action","hive-action__delete",{"action-active":"delete"===i}),onDown:function(){return a()}},"Delete"),m.createElement(Mt,{className:f("hive-action","hive-action__shuffle",{"action-active":"shuffle"===i}),onDown:function(){return e.handleShuffle()}}),m.createElement(Mt,{className:f("hive-action","hive-action__submit",{"action-active":"submit"===i}),onDown:function(){return c()}},"Enter")))}}]),n}();Gt.defaultProps={};var Ht=e.connect(function(e){return{centerLetter:e.centerLetter,outerLetters:e.outerLetters}},function(t){return{deleteLetter:function(){return t(function(e,t){var n=t();n.isLocked||(n.message&&n.message.isError?e({type:Je}):e({type:Ye}))})},inputLetter:function(e){return t(function(r){return function(e,t){var n=t();n.isLocked||(18<n.input.length?e(Me({value:"Too long",isError:!0})):(n.message&&n.message.isError&&e({type:Je}),e({type:Be,payload:r})))}}(e))},submitWord:function(){return t(Ae())},shuffleLetters:function(){return t(ze())}}})(Gt),Xt=e.connect(function(e){var t=e.centerLetter,n=e.outerLetters,r=e.input;return{message:e.message,centerLetter:t,validLetters:[t].concat(n),input:r}})(function(e){var t=e.input,n=e.centerLetter,r=e.validLetters,o=e.message;return m.createElement("div",{className:"sb-hive-input"},m.createElement("span",{className:f("sb-hive-input-content",{"non-empty":!!t.length,"has-error":o&&o.isError,"is-accepting":o&&!o.isError}),style:{fontSize:function(e){return"".concat(e<13?32:32-1.5*(e-13),"px")}(t.length)}},t.length?t.map(function(e,t){return m.createElement("span",{key:e+t,className:f({"sb-input-bright":n===e,"sb-input-invalid":!r.includes(e)})},e)}):m.createElement("span",null," ")))}),qt=e.connect(function(e){return{words:e.foundWords.slice().sort(function(e,t){return t<e?1:-1}),centerLetter:e.centerLetter,expandedWordlist:e.expandedWordlist}},{})(function(e){var t=e.words,n=e.centerLetter;return m.createElement("div",{className:"sb-wordlist"},m.createElement("ul",{className:"sb-wordlist-items"},t.map(function(e){return m.createElement("li",{key:e},m.createElement(ie,{value:e,centerLetter:n}))})))}),Jt=e.connect(function(e){return{wordCount:e.foundWords.length,recentWords:e.foundWords.slice().reverse(),centerLetter:e.centerLetter,expandedWordlist:e.expandedWordlist}},function(e){return{toggleWordlist:function(){return e({type:Qe})}}})(function(e){var t=e.wordCount,n=e.recentWords,r=e.centerLetter,o=e.expandedWordlist,a=e.toggleWordlist;return m.createElement(Mt,{className:"sb-wordlist-heading-wrap",onDown:a},m.createElement("div",{className:"sb-wordlist-summary"},"You have found"," ",t," ",1===t?"word":"words"),m.createElement("div",{className:"sb-recent-words-wrap"},m.createElement("ul",{className:f("sb-recent-words",{"sb-has-words":0<n.length})},n.length?n.map(function(e){return m.createElement("li",{key:e},m.createElement(ie,{value:e,centerLetter:r}))}):m.createElement("li",{key:"none",className:"sb-placeholder-text"},"Your words …"))),m.createElement("div",{className:"sb-toggle-expand"},m.createElement("span",{className:f("sb-toggle-icon",{"sb-toggle-icon-expanded":o})})))}),Qt=e.connect(function(e){return{score:et(e),ranks:tt(e),rankIdx:nt(e),rank:rt(e)}})(function(e){var t=e.score,n=e.rank,r=e.rankIdx,o=e.ranks;return m.createElement(Oe,{modal:"ranks",triggerName:"in-game"},m.createElement("div",{className:"sb-progress",title:"Click to see today’s ranks"},m.createElement("h4",{className:"sb-progress-rank"},n),m.createElement("div",{className:"sb-progress-line"},m.createElement("div",{className:"sb-progress-dots"},o.map(function(e,t){return m.createElement("span",{key:t,className:f("sb-progress-dot",{completed:t<r})})})),m.createElement("div",{className:f("sb-progress-marker",{final:r===o.length-1}),style:{left:"".concat(r/(o.length-1)*100,"%")}},m.createElement("span",{className:"sb-progress-value"},t)))))}),$t=e.connect(function(e){return{message:e.message}})(function(e){var t=e.message;return m.createElement("div",{className:f("sb-message-box",{"error-message":t&&t.isError,"success-message":t&&!t.isError,"pangram-message":t&&t.isPangram})},t&&m.createElement("span",{className:"sb-message"},t.value),t&&t.points&&m.createElement("span",{className:"sb-message-points"},"+",t.points))});s.mobileNavTools.create([{type:"text",value:"Help",action:function(){return se("help","toolbar")}},{type:"text",value:"Save",action:function(){return se("save","toolbar")}}]);function Vt(){return a.createPortal(m.createElement(m.Fragment,null,m.createElement("div",null,m.createElement(Oe,{className:"pz-toolbar-button pz-toolbar-button__help",modal:"help",triggerName:"toolbar"},"Big Hint")),m.createElement(Oe,{className:"pz-toolbar-button pz-toolbar-button__yesterday",modal:"yesterday",triggerName:"toolbar"},"Yesterday’s Answers")),en)}function Zt(e,t,n){K.interaction.modal("".concat(tn[e]||e,"|").concat(t),n)}var en=document.getElementById("portal-game-toolbar"),tn={help:"rules",save:"save-and-quit",ranks:"rankings",start:"get-started",congrats:"congrats",yesterday:"yesterdays-answers"},nn=e.connect(function(e){var t=e.expandedWordlist,n=e.isLocked,r=at(e);return{expandedWordlist:t,isLocked:n,hasCompleted:r,score:et(e),initialModal:r?null:"start"}},function(e){return{lockGame:function(){return e({type:"LOCK"})},unlockGame:function(){return e({type:"UNLOCK"})}}})(function(e){var t=e.expandedWordlist,n=e.isLocked,r=e.lockGame,o=e.unlockGame,a=e.initialModal;return m.createElement("div",{className:f("sb-content-box",{"sb-expanded":t,"sb-game-locked":n})},m.createElement(Vt,null),m.createElement(Ne,{onOpen:function(e,t){r(),Zt(e,"open",t)},onClose:function(e,t){o(),s.mobileNavTools.activate(),Zt(e,"close",t)},initialModal:a}),m.createElement("div",{className:"sb-controls-box"},m.createElement("div",{className:"sb-controls"},m.createElement($t,null),m.createElement(Xt,null),m.createElement(Ht,null))),m.createElement("div",{className:"sb-status-box"},m.createElement("div",{className:"sb-progress-box"},m.createElement(Qt,null)),m.createElement("div",{className:"sb-wordlist-box"},m.createElement("div",{className:"sb-wordlist-heading"},m.createElement(Jt,null)),m.createElement("div",{className:"sb-wordlist-drawer"},m.createElement("div",{className:"sb-wordlist-window"},m.createElement(qt,null))))))}),rn=document.getElementById("pz-game-root");a.render(m.createElement(e.Provider,{store:function(e){var t=[r.applyMiddleware(n,Ue,Ie)];window.__REDUX_DEVTOOLS_EXTENSION__&&t.push(window.__REDUX_DEVTOOLS_EXTENSION__());var o=r.createStore(Ce,function(e){return Te({},e.today,{input:[],foundWords:[],expandedWordlist:!1,isLocked:!1,message:null,yesterday:Te({},e.yesterday,{foundWords:[]}),userType:s.userType})}(e),r.compose.apply(void 0,t));return x(o,function(e){return o.dispatch(function(e){return{type:Ve,payload:e}}(e))},function(e){return o.dispatch(function(e){return{type:Ze,payload:e}}(e))}),o.dispatch(ze()),window.userType.inShortzMode&&(window.cheat=function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:1,t=o.getState(),n=t.answers,r=t.foundWords;n.filter(function(e){return!r.includes(e)}).slice(0,e).forEach(function(e){return o.dispatch({type:He,payload:e})})},window.reset=function(){o.dispatch({type:$e})}),o}(s.getGameData())},m.createElement(nn,null)),rn)});
